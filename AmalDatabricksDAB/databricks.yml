# databricks.yml
bundle:
  name: amaldatabricks
  uuid: 98bee946-7642-4fd2-beb9-d89c27ed0c2c
  
include:
  - resources/**/*.yml
  - config/*.yml

artifacts:
  notebooks:
    files:
      - source: DataPlatform/**/*

targets:
  dev:
    mode: development
    default: true

    run_as:
      service_principal_name: a7923e63-e14c-4c32-87cc-e89e3b4a165a

    presets:
      name_prefix: "[dev ${workspace.current_user.short_name}]_"
      source_linked_deployment: false
      tags:
        amal_owner: DataEngineering
        Environment: Dev

    workspace:
      host: https://adb-201068313543333.13.azuredatabricks.net
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}

    permissions:
      - group_name: DataEngineering
        level: CAN_MANAGE
      - group_name: DataEngineering-Contractors
        level: CAN_MANAGE

  qa:
    mode: production

    run_as:
      service_principal_name: a7923e63-e14c-4c32-87cc-e89e3b4a165a

    presets:
      source_linked_deployment: false
      tags:
        amal_owner: DataEngineering
        Environment: QA

    variables:
      catalog_name:
        default: ab_uat_catalog
      email_notifications:
        default: dataengineering-team@avatest.in

    workspace:
      host: https://adb-201068313543333.13.azuredatabricks.net

    permissions:
      - group_name: DataEngineering
        level: CAN_MANAGE
      - group_name: DataEngineering-Contractors
        level: CAN_MANAGE

  prod:
    mode: production

    run_as:
      service_principal_name: a7923e63-e14c-4c32-87cc-e89e3b4a165a

    presets:
      tags:
        amal_owner: DataEngineering
        Environment: Prod

    variables:
      catalog_name:
        default: ab_prod_catalog
      email_notifications:
        default: pandi.anbu@zeb.co

    workspace:
      host: https://adb-201068313543333.13.azuredatabricks.net

    permissions:
      - user_name: a7923e63-e14c-4c32-87cc-e89e3b4a165a
        level: CAN_MANAGE